<!-- employee-table.component.html -->
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"> 
</head>
<body>
<div class="container-fluid">
    <div class="header navbar-expand-sm bg-outline-danger   navbar-dark">
      
      <ul class="navbar-nav justify-content-between space-right2 m-4">
        <li>
           <img src="assets/download.jpeg"  style="height: 100px;  width: 100px;" >
        </li>
        <li>
          <h2 class="mt-4"><b><u>List View</u></b></h2>
        </li>
        <li>
            <button  class="rounded rounded-1 btn btn-outline-info text-dark mt-4"   style="background: DodgerBlue;" mat-raised-button (click)="openAddEmployeeDialog()"><b> Add Employee</b> </button>
        </li>
      </ul>
    
    </div>
    <div class=" mt-1">
      <h2 class="" style="color: DodgerBlue;"><b>Employee List</b></h2>
      <table class="table table-striped border border-2 border-dark mt-1" >
        <thead >
          <tr>
            <th>Emp Id</th>
            <th>Email Id</th>
            <th>Mobile No</th>
            <th>Department</th>
            <th>Role</th>
            <th>Org_Name</th>
            <th>Emp_type</th>
            <th>B_Place</th>
            <th>Address</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody >
          <tr *ngFor="let employee of employees" >
            <td>{{ employee.emp_id }}</td>
            <td>{{ employee.email_id }}</td>
            <td>{{ employee.mobile_no }}</td>
            <td>{{ employee.department }}</td>
            <td>{{ employee.role }}</td>
            <td>{{ employee.org_name }}</td>
            <td>{{ employee.emp_type }}</td>
            <td>{{ employee.bp }}</td>
            <td>{{ employee.address}}</td>
            <td><i type="button" (click)="edit (employee)" class="bi bi-pencil-square mx-2" data-bs-target="#login" data-bs-toggle="modal"></i></td>
            <td><i type="button" (click)="Delete(employee.emp_id)" (click)="refreshPage()"  class="bi bi-trash mx-3"></i></td>
          </tr>
        </tbody>
      </table>
    </div>

    
    
      <div class="modal " id="login">
        <div class="modal-dialog ">
           <div class="modal-content" style="width: 550px; height: 720px;">
      <div class="modal-header">
        <h4 class="modal-title">Edit Employee</h4>
      </div>
      <div class="modal-body">
        
        <form [formGroup]="frmEdit" (ngSubmit)="submit()">
         <div class="form-control">

          <dt>Emp_id</dt>
          <input type="text"  class="form-control"  formControlName="emp_id" id="emp_id" placeholder="Emp id" >
          <div class="text-danger" *ngIf="Emp_id.touched && Emp_id.invalid">
            <div *ngIf="email_id.errors?.['required']">id Required</div>
        </div>

          <dt >Email id</dt>
          <input type="email"  class="form-control" formControlName="email_id" placeholder="Email id" id="email_id"  >
          <div class="text-danger" *ngIf="email_id.touched && email_id.invalid">
            <div *ngIf="email_id.errors?.['required']">Email Required</div>
            <div *ngIf="email_id.errors?.['email']">write in email form</div>
         </div>
         <dt>Mobile No</dt>
            <input type="text" class="form-control" formControlName="mobile_no" placeholder="mobile no" id="mobile_no" >
            <div class="text-danger" *ngIf="Mobile.touched && Mobile.invalid">
                    <div *ngIf="Mobile.errors?.['required']">Mobile Required</div>
                    <div *ngIf="Mobile.errors?.['pattern']">Invalid Mobile +91 and 10 digits</div>
                </div>
          
            <dt>Department</dt>
            <input type="text" class="form-control" formControlName="department" placeholder="Department" id="department" >
            <div class="text-danger" *ngIf="Deparment.touched && Deparment.invalid">
              <div *ngIf="Deparment.errors?.['required']">Department Required</div>
          </div>
          
            <dt>Role</dt>
            <select type="text" class="form-control dropdown" formControlName="role" placeholder="Role"  [(ngModel)]="Role">
              <option *ngFor="let r of Roles " [value]="r.id">
                {{r.roles}}
              </option>
            </select>         
           
            <dt>Organization Name</dt>
            <select type="text" class="form-control dropdown" formControlName="org_name" placeholder="Organization" id="org_name" >
              <option>Incresol</option>
            </select>
          
            <dt>Employee Type</dt>
            <select type="text" class="form-control dropdown" formControlName="emp_type" placeholder="Employee Type" id="emp_type"  [(ngModel)]="Emptype">
              <option *ngFor="let t of EmpType " [value]="t.id">{{t.type}}</option>
            </select>   
        
            <dt>B_Place</dt>
            <select type="text" class="form-control dropdown" formControlName="bp" id="bp" placeholder="Business place" >
              <option>Hyderabad</option>
            </select>
         
            <dt>Address</dt>
            <input type="text" class="form-control" formControlName="address" id="address" placeholder="Address" >
            <div class="text-danger" *ngIf="Address.touched && Address.invalid">
              <div *ngIf="Address.errors?.['required']">Address Required</div>
          </div>
         </div>
         <div class="modal-footer justify-content-center">
          <button  data-bs-dismiss="modal" class="btn btn-primary" type="submit" value="submit" (click)="submit()">Save Edit</button>
        </div>
        </form>
      </div>
    </div>
    </div>
    </div>
  

    </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>